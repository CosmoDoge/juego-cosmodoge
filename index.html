<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CosmoDoge Flotante üöÄ</title>

  <!-- ethers.js para MetaMask -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

  <style>
    /* Estilos generales */
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { width:100%; height:100%; overflow:hidden; background:black; font-family:Arial,sans-serif; touch-action:none; }
    canvas { display:block; margin:auto; max-width:100vw; max-height:100vh; }
    /* Contadores */
    #scoreDisplay,#coinDisplay,#highScoreDisplay,#contadorCDOGE {
      position:absolute; color:white; font-size:18px; text-shadow:2px 2px 5px #000; font-family:Orbitron,sans-serif;
    }
    #scoreDisplay{top:10px; left:10px;}
    #coinDisplay {top:40px; left:10px;}
    #highScoreDisplay{top:70px; left:10px;}
    #contadorCDOGE{top:100px; left:10px; color:#00ffcc;}
    /* Nombre jugador */
    #nombreJugador {
      position:fixed; top:10px; left:50%; transform:translateX(-50%);
      color:#00ffff; font-family:'Orbitron',sans-serif; font-size:18px; text-shadow:1px 1px 3px black; z-index:10;
    }
    /* Bot√≥n wallet */
    #conectarWalletBtn {
      position:fixed; top:20px; right:20px; z-index:10000;
      background:#00ffff; color:black; border:none; border-radius:12px;
      padding:10px 20px; font-family:'Orbitron',sans-serif; font-size:16px; cursor:pointer;
    }
    #balanceCDOGE {
      position:fixed; top:70px; right:20px; z-index:10000;
      background:rgba(0,0,0,0.7); color:#00ffcc; padding:10px 15px;
      font-family:'Orbitron',sans-serif; font-size:16px; border-radius:10px;
      display:none; max-width:250px; text-shadow:1px 1px 3px black;
    }
    /* Men√∫ tienda */
    #menuPrincipal {
      position:fixed; top:70px; right:20px; z-index:10000;
      display:flex; flex-direction:column; gap:10px; font-family:Orbitron,sans-serif;
    }
    #menuPrincipal button {
      background:#00ffff; color:black; border:none; border-radius:12px;
      padding:10px 20px; font-size:16px; cursor:pointer;
    }
    /* Panel tienda */
    #tiendaCDOGE {
      position:fixed; bottom:20px; left:20px; z-index:1000;
      width:320px; padding:15px; background:rgba(0,0,0,0.85);
      border:2px solid #00ffff; border-radius:15px;
      box-shadow:0 0 15px #00ffff; backdrop-filter:blur(5px);
      color:white; font-family:'Orbitron',sans-serif;
      display:none;
    }
    /* Contador im√°n */
    #contadorIman {
      position:fixed; bottom:10px; right:20px; z-index:1000;
      background:rgba(0,0,0,0.7); color:#00ffff;
      padding:8px 12px; border-radius:10px;
      font-family:Orbitron,sans-serif; font-size:16px;
      display:none;
    }
    /* Preloader */
    #pantallaCarga {
      position:fixed; top:0; left:0; width:100vw; height:100vh;
      background:black; z-index:9999; display:flex;
      align-items:center; justify-content:center; flex-direction:column;
    }
    .spinner {
      width:60px; height:60px; border:6px solid #ffffff22;
      border-top:6px solid #00ffff; border-radius:50%;
      animation:spin 1s linear infinite;
    }
    @keyframes spin { 0%{transform:rotate(0)}100%{transform:rotate(360deg)} }
    /* Pantallas inicio, gameover, record */
    #startScreen,#newRecordMessage {
      position:absolute; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.85); display:flex;
      align-items:center; justify-content:center; flex-direction:column;
      color:white; z-index:10;
    }
    .btn {
      padding:1rem 2rem; background:#00ffff; border:none; border-radius:10px;
      color:black; font-size:1.2rem; font-weight:bold; cursor:pointer;
      transition:background-color .3s;
    }
    .btn:hover{background:#00e7f5}
    #gameOverScreen {
      position:fixed; top:0; left:0; width:100vw; height:100vh;
      background:rgba(0,0,0,0.85); display:none; opacity:0;
      align-items:center; justify-content:center; flex-direction:column;
      color:white; font-family:'Orbitron',sans-serif; z-index:9998;
      transition:opacity 1s;
    }
    #gameOverScreen.show{display:flex;opacity:1}
    #reiniciarBtn {
      margin-top:20px; padding:12px 24px; background:#00ffff;
      color:black; border:none; border-radius:12px; font-size:18px;
      cursor:pointer; display:none;
    }
    #reiniciarBtn:hover{background:#00e7f5}
    #playerNameForm {
      display:none; position:relative; z-index:20;
      background:rgba(0,0,0,0.85); padding:20px; border-radius:10px;
      flex-direction:column; align-items:center; margin-top:20px;
    }
  </style>
</head>

<body>
  <!-- Preloader -->
  <div id="pantallaCarga">
    <div class="spinner"></div>
    <p style="color:white;font-family:'Orbitron',sans-serif;margin-top:20px;text-align:center;">
      Iniciando viaje intergal√°ctico...
    </p>
  </div>

  <!-- Wallet -->
  <button id="conectarWalletBtn">üîó Conectar Wallet</button>
  <div id="balanceCDOGE"></div>

  <!-- Men√∫ Tienda -->
  <div id="menuPrincipal">
    <button onclick="toggleTienda()">üõí Tienda</button>
  </div>

  <!-- Panel Tienda -->
  <div id="tiendaCDOGE">
    <h3 style="color:#00ffff;font-size:22px;margin-bottom:10px;">üõí Tienda CosmoDoge</h3>
    <div style="background:#111111;padding:10px;border:1px solid #00ffcc;border-radius:10px;margin-bottom:15px;">
      <p style="color:#00ffcc;font-size:16px;margin:0;">üß≤ Im√°n Espacial</p>
      <p style="color:#bbbbbb;font-size:14px;margin:5px 0 10px;">Atrae monedas durante 1 hora.</p>
      <button id="comprarIman" style="background:#00ffcc;color:black;border:none;border-radius:8px;padding:8px;font-size:15px;width:100%;cursor:pointer;">
        Comprar por 5,000 $CDOGE
      </button>
    </div>
  </div>

  <!-- Contadores e interfaz -->
  <canvas id="gameCanvas" width="480" height="640"></canvas>
  <div id="scoreDisplay">üöÄ x 0</div>
  <div id="coinDisplay">üí∞ x 0</div>
  <div id="highScoreDisplay">üîù M√°x: 0</div>
  <div id="contadorCDOGE">üí∞ CDOGE: 0</div>
  <div id="nombreJugador"></div>
  <div id="contadorIman">üß≤ Im√°n activo: 60:00</div>

  <!-- Pantallas -->
  <div id="startScreen" style="display:none;">
    <h1 style="color:white;font-family:'Orbitron',sans-serif;">üöÄ Mant√©n a CosmoDoge flotando</h1>
    <button class="btn" id="startButton">¬°Comenzar!</button>
  </div>
  <div id="gameOverScreen">
    <h1>üö® GAME OVER üö®</h1>
    <p>Puntaje: <span id="finalScore">0</span></p>
    <button id="reiniciarBtn" class="btn">Reiniciar</button>
  </div>
  <div id="newRecordMessage" style="display:none;">
    <h1>üåü ¬°Nuevo r√©cord gal√°ctico!</h1>
    <p>üèÜ ¬°Has superado todos los l√≠mites de CosmoDoge!</p>
  </div>
  <div id="playerNameForm">
    <input id="playerName" type="text" placeholder="Tu nombre gal√°ctico"
           style="padding:10px;font-size:16px;border-radius:8px;border:none;margin-bottom:10px;">
    <button id="saveScoreButton" class="btn">Guardar Puntaje</button>
  </div>
  <div id="rankingPanel" style="display:none;">
    <div id="topRanking"></div>
    <button class="btn" id="closeRankingBtn" onclick="rankingPanel.style.display='none'">Cerrar</button>
  </div>
  <button id="reanudarBtn" class="btn"
          style="display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);">
    Reanudar Juego
  </button>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import {
      getFirestore, collection, query, orderBy,
      limit, getDocs, addDoc, serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

    // -----------------------------
    // FIRESTORE CONFIG
    // -----------------------------
    const firebaseConfig = {
      apiKey: "AIzaSyDaM9HtMtTlJXc-V4HfsZ7bbC__ZPe9zIk",
      authDomain: "cosmodogelive.firebaseapp.com",
      projectId: "cosmodogelive",
      storageBucket: "cosmodogelive.appspot.com",
      messagingSenderId: "648227069914",
      appId: "1:648227069914:web:3ef7ac8da4ab52c30deae3"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function guardarJugadorAutomatic(username, puntaje, monedas) {
      const data = { nombre:username, puntaje, monedas, fecha:serverTimestamp() };
      try { await addDoc(collection(db,"jugadores"),data); }
      catch(e){ console.error("Error Firestore:",e); }
    }
    window.mostrarTopRanking = async () => {
      const lista = document.getElementById("topRanking");
      try {
        const q = query(collection(db,"jugadores"),orderBy("puntaje","desc"),limit(5));
        const snap = await getDocs(q);
        let html="<h2>üèÜ Top 5 CosmoDoge</h2><ul style='list-style:none;padding:0;'>";
        snap.forEach((doc,i)=>{const d=doc.data();
          html+=`<li>#${i+1} <strong>${d.nombre}</strong> - ${d.puntaje}pts - ${d.monedas}ü™ô</li>`;
        });
        lista.innerHTML=html+"</ul>";
      } catch(e){ lista.innerHTML="<p style='color:red;'>Error cargando ranking</p>"; }
    };

    // -----------------------------
    // FUNCIONES FALTANTES
    // -----------------------------
    function mostrarMensajeTemporal(texto,x,y) {
      const msg=document.createElement("div");
      msg.textContent=texto;
      Object.assign(msg.style,{position:"absolute",left:`${x}px`,top:`${y}px`,
        color:"#00ffcc",fontFamily:"Orbitron,sans-serif",fontSize:"18px",zIndex:1000,transition:"all 1.5s"});
      document.body.appendChild(msg);
      setTimeout(()=>{ msg.style.opacity="0"; msg.style.transform="translateY(-40px)"; },100);
      setTimeout(()=>{ document.body.removeChild(msg); },1600);
    }
    function actualizarContadorCDOGE() {
      const div=document.getElementById("contadorCDOGE");
      if(div) div.textContent=`üí∞ CDOGE: ${totalCDOGERecolectado}`;
    }

    // -----------------------------
    // GAME LOGIC
    // -----------------------------
    const esMovil = /Mobi|Android/i.test(navigator.userAgent);
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    if(esMovil){ canvas.width=innerWidth; canvas.height=innerHeight; }

    let lastTime=0, gameLoop, pausaPorCambioVentana=false;
    const fondos=["fondo-cosmodoge-v2.png","fondo-cosmodoge-v3.png","fondo-cosmodoge-v4.png"];
    let fondoIndex=0, fondo=new Image(); fondo.src=fondos[0];

    const doge={x:80,y:200,width:50,height:50,velocity:0,img:new Image()};
    doge.img.src="cosmodoge-cohete-juego.png";

    let gravity=0.5, gravityLevels=[0.5,0.6,0.8,1.0], jump=-10;
    let score=0, coins=parseInt(localStorage.getItem("cdogeCoins"))||0;
    let highScore=parseInt(localStorage.getItem("cdogeFloatHighScore"))||0;
    let totalCDOGERecolectado=parseInt(localStorage.getItem("cdogeRecolectados"))||0;
    let gameStarted=false, isGameOver=false, timeElapsed=0, lastScoreTime=0, lastFondoChange=0;
    let coinsArray=[], specialObstacles=[], lastObstacleSpawn=Date.now();

    const coinImg=new Image(); coinImg.src="coin-cosmodoge.png";
    const obstacleImgs=["obstaculo-estelar.png","obstaculo-explosion.png","obstaculo-explosion-aire.png"];

    // UI elements
    const scoreDisplay=document.getElementById("scoreDisplay");
    const coinDisplay=document.getElementById("coinDisplay");
    const highScoreDisplay=document.getElementById("highScoreDisplay");
    const finalScoreElem=document.getElementById("finalScore");
    const nombreJugadorDiv=document.getElementById("nombreJugador");

    coinDisplay.textContent="üí∞ x "+coins;
    highScoreDisplay.textContent="üîù M√°x: "+highScore;
    actualizarContadorCDOGE();

    // Mostrar nombre si existe
    const nombreGuardado=localStorage.getItem("cosmodogeliveUserName");
    if(nombreGuardado) nombreJugadorDiv.textContent=`üê∂ CosmoPlayer: ${nombreGuardado}`;

    function playSound(a){ a.currentTime=0; a.play().catch(()=>{}); }
    const sndJump=new Audio("jump.mp3"), sndCoin=new Audio("coin.mp3"),
          sndBoom=new Audio("boom.mp3"), sndRecord=new Audio("record.mp3"),
          music=new Audio("music-cosmodoge-theme.mp3");
    music.loop=true; music.volume=0.3;

    function drawBackground() {
      ctx.drawImage(fondo,0,0,canvas.width,canvas.height);
    }
    function dibujarAura(d) {
      if(imanActivo){
        ctx.beginPath();
        ctx.arc(d.x+d.width/2,d.y+d.height/2,d.width*1.5,0,Math.PI*2);
        ctx.strokeStyle='#00ffff88'; ctx.lineWidth=4; ctx.stroke();
      }
    }
    function drawDoge() {
      ctx.drawImage(doge.img,doge.x,doge.y,doge.width,doge.height);
      dibujarAura(doge);
    }
    function spawnCoinGroup(){
      const amt=Math.floor(Math.random()*6)+5;
      for(let i=0;i<amt;i++){
        coinsArray.push({x:canvas.width+i*40,y:Math.random()*(canvas.height-100),width:30,height:30,speed:2});
      }
    }
    function drawCoins(){
      for(let i=coinsArray.length-1;i>=0;i--){
        const c=coinsArray[i];
        c.x-=c.speed;
        ctx.drawImage(coinImg,c.x,c.y,c.width,c.height);
        if(doge.x<c.x+c.width && doge.x+doge.width>c.x &&
           doge.y<c.y+c.height&&doge.y+doge.height>c.y){
          coins++; localStorage.setItem("cdogeCoins",coins);
          coinDisplay.textContent="üí∞ x "+coins;
          playSound(sndCoin);
          coinsArray.splice(i,1);
        }
      }
    }
    function spawnObstacle(){
      const img=new Image();
      img.src=obstacleImgs[Math.floor(Math.random()*obstacleImgs.length)];
      specialObstacles.push({
        x:canvas.width,y:Math.random()*canvas.height,
        width:50,height:50,
        speedX:2+Math.random()*2,
        speedY:0.5+Math.random()*1.5,
        img
      });
    }
    function drawObstacles(){
      specialObstacles.forEach(obs=>{
        obs.x-=obs.speedX;
        obs.y+= obs.y<doge.y?obs.speedY:-obs.speedY;
        ctx.drawImage(obs.img,obs.x,obs.y,obs.width,obs.height);
        if(doge.x<obs.x+obs.width && doge.x+doge.width>obs.x &&
           doge.y<obs.y+obs.height&& doge.y+doge.height>obs.y){
          gameOver();
        }
      });
      specialObstacles=specialObstacles.filter(o=>o.x+o.width>0);
    }
    function updateDifficulty(s){
      if(s>=75) gravity=gravityLevels[3];
      else if(s>=45) gravity=gravityLevels[2];
      else if(s>=30) gravity=gravityLevels[1];
      else gravity=gravityLevels[0];
    }

    // Monedas $CDOGE
    let monedasCDOGE=[], valorPorMoneda=50;
    const imagenMoneda=new Image(); imagenMoneda.src="moneda-cosmodoge.png";
    const sonidoMoneda=new Audio("sonido-moneda-cdoge.mp3");
    const ubicacionesDificiles=[
      {x:80,y:100},{x:canvas.width-120,y:80},
      {x:canvas.width/2,y:canvas.height/3},
      {x:canvas.width-80,y:canvas.height-120},
      {x:100,y:canvas.height-150}
    ];
    function generarMonedaCDOGE(){
      if(monedasCDOGE.length) return;
      const pos=ubicacionesDificiles[Math.floor(Math.random()*ubicacionesDificiles.length)];
      monedasCDOGE.push({...pos,width:32,height:32,recolectada:false});
    }
    setInterval(generarMonedaCDOGE,20000);
    function dibujarMonedasCDOGE(){
      monedasCDOGE.forEach(m=>{
        if(!m.recolectada) ctx.drawImage(imagenMoneda,m.x,m.y,m.width,m.height);
      });
    }
    function detectarColisionMonedas(d){
      monedasCDOGE.forEach(m=>{
        const dx=d.x-m.x, dy=d.y-m.y, dist=Math.hypot(dx,dy);
        if(imanActivo && dist<150){
          m.x+=(d.x-m.x)*0.05; m.y+=(d.y-m.y)*0.05;
        }
        if(!m.recolectada &&
           d.x<m.x+m.width && d.x+d.width>m.x &&
           d.y<m.y+m.height&& d.y+d.height>m.y){
          m.recolectada=true;
          totalCDOGERecolectado+=valorPorMoneda;
          localStorage.setItem("cdogeRecolectados",totalCDOGERecolectado);
          sonidoMoneda.play();
          mostrarMensajeTemporal(`+${valorPorMoneda} $CDOGE`,m.x,m.y);
          actualizarContadorCDOGE();
        }
      });
    }

    // Un solo updateGame
    function updateGame(timestamp){
      if(isGameOver) return;
      if(!lastTime) lastTime=timestamp;
      const delta=timestamp-lastTime; lastTime=timestamp;

      ctx.clearRect(0,0,canvas.width,canvas.height);
      drawBackground();
      doge.velocity+=gravity*(delta/16);
      doge.y+=doge.velocity*(delta/16);
      if(doge.y+doge.height>=canvas.height||doge.y<=0){ gameOver(); return; }
      drawDoge(); drawCoins(); drawObstacles();
      dibujarMonedasCDOGE(); detectarColisionMonedas(doge);

      timeElapsed+=delta;
      const secs=timeElapsed/1000;
      if(secs-lastScoreTime>=5){
        score++; lastScoreTime=secs;
        scoreDisplay.textContent="üöÄ x "+score;
      }
      if(secs-lastFondoChange>=30){
        fondoIndex=(fondoIndex+1)%fondos.length; fondo.src=fondos[fondoIndex];
        lastFondoChange=secs;
      }
      if(Math.floor(timeElapsed/16)%150===0) spawnCoinGroup();
      updateDifficulty(secs);

      const now=Date.now();
      const interval=(timeElapsed/16)>=3600?1000:((timeElapsed/16)>=1800?2000:3000);
      if(now-lastObstacleSpawn>=interval){
        spawnObstacle(); lastObstacleSpawn=now;
      }

      gameLoop=requestAnimationFrame(updateGame);
    }

    function gameOver(){
      isGameOver=true;
      finalScoreElem.textContent=score;
      music.pause(); music.currentTime=0;
      document.getElementById("gameOverScreen").classList.add("show");
      setTimeout(()=>reiniciarBtn.style.display="block",1500);

      if(score>highScore){
        localStorage.setItem("cdogeFloatHighScore",score);
        highScore=score; highScoreDisplay.textContent="üîù M√°x: "+highScore;
        newRecordMessage.style.display="flex"; playSound(sndRecord);
        const u=localStorage.getItem("cosmodogeliveUserName");
        if(u){ guardarJugadorAutomatic(u,score,coins); mostrarNombreJugador(u); playerNameForm.style.display="none"; }
        else playerNameForm.style.display="flex";
      } else playSound(sndBoom);
    }

    // Controles
    document.addEventListener("keydown",e=>{
      if(e.code==="Space"&&gameStarted&&!isGameOver){ doge.velocity=jump; sndJump.currentTime=0; playSound(sndJump); }
    });
    if(esMovil){
      document.addEventListener("touchstart",()=>{
        if(gameStarted&&!isGameOver){ doge.velocity=jump; sndJump.currentTime=0; playSound(sndJump); }
      });
    }

    // toggleTienda
    function toggleTienda(){
      const t=document.getElementById("tiendaCDOGE");
      t.style.display=(t.style.display==="block"?"none":"block");
    }

    // iniciarJuegoLimpio
    function iniciarJuegoLimpio(){
      menuPrincipal.style.display="none";
      tiendaCDOGE.style.display="none";
      startGame();
    }
    function startGame(){
      startScreen.style.display="none";
      pantallaCarga.style.display="none";
      gameStarted=true;
      music.play();
      gameLoop=requestAnimationFrame(updateGame);
    }
    startButton.onclick=iniciarJuegoLimpio;

    // Guardar puntaje
    saveScoreButton.addEventListener("click",()=>{
      const n=playerName.value.trim();
      if(!n) return alert("Ingresa tu nombre gal√°ctico");
      localStorage.setItem("cosmodogeliveUserName",n);
      guardarJugadorAutomatic(n,score,coins).then(()=>{
        mostrarTopRanking(); mostrarNombreJugador(n);
        playerNameForm.style.display="none";
      });
    });

    reiniciarBtn.addEventListener("click",()=>location.reload());
    document.addEventListener("visibilitychange",()=>{
      if(document.hidden){
        if(gameLoop) cancelAnimationFrame(gameLoop);
        reanudarBtn.style.display="block"; pausaPorCambioVentana=true;
      }
    });
    reanudarBtn.addEventListener("click",()=>{
      reanudarBtn.style.display="none";
      if(pausaPorCambioVentana){ gameLoop=requestAnimationFrame(updateGame); pausaPorCambioVentana=false; }
    });

    // MetaMask & comprarImanConCDOGE
    const botonWallet=document.getElementById("conectarWalletBtn");
    botonWallet.addEventListener("click",async()=>{
      if(!window.ethereum) return alert("Instala MetaMask");
      const prov=new ethers.providers.Web3Provider(window.ethereum);
      const acct=await window.ethereum.request({method:'eth_requestAccounts'});
      const a=acct[0];
      botonWallet.textContent=`üßë‚ÄçüöÄ Wallet: ${a.slice(0,6)}...${a.slice(-4)}`;
      const contrato=new ethers.Contract(
        "0x5dE25281305992d3552a45A3D8ccA7BdfB4AcD3A",
        ["function balanceOf(address) view returns(uint256)","function decimals() view returns(uint8)"],
        prov
      );
      const bal=await contrato.balanceOf(a);
      const dec=await contrato.decimals();
      const fmt=Number(bal/10**dec).toLocaleString();
      window.walletCDOGE=Number(bal/10**dec);
      balanceCDOGE.innerHTML=`üöÄ ¬°Tu nave lleva <strong>${fmt}</strong> $CDOGE!`;
      balanceCDOGE.style.display="block";
    });

    async function comprarImanConCDOGE(){
      if(!window.ethereum) return alert("‚ùå Necesitas MetaMask");
      const provider=new ethers.providers.Web3Provider(window.ethereum);
      const signer=provider.getSigner();
      const token=new ethers.Contract(
        "0x5dE25281305992d3552a45A3D8ccA7BdfB4AcD3A",
        ["function transfer(address,uint256) public returns(bool)","function decimals() view returns(uint8)"],
        signer
      );
      const dec=await token.decimals();
      const amount=ethers.utils.parseUnits("5000",dec);
      const balanceOnChain=await token.balanceOf(await signer.getAddress());
      if(balanceOnChain.lt(amount)) return alert("‚ùå No tienes suficientes $CDOGE");
      if(!confirm("Comprar im√°n por 5,000 $CDOGE?")) return;
      const tx=await token.transfer("0x1980dCdDA07071970dEAa69c975F590976Ee667D",amount);
      mostrarMensajeTemporal("‚è≥ Esperando confirmaci√≥n...",canvas.width/2,120);
      await tx.wait();
      activarIman();
      alert("‚úÖ ¬°Im√°n activado!");
    }
    document.getElementById("comprarIman").addEventListener("click",comprarImanConCDOGE);

    // On load
    window.addEventListener("DOMContentLoaded",()=>{
      actualizarEstadoIman();
      setTimeout(()=>pantallaCarga.style.display="none",3000);
      startScreen.style.display="flex";
    });
  </script>
</body>
</html>
