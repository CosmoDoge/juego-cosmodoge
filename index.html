<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CosmoDoge Flotante üöÄ</title>

  <!-- Google Fonts: Orbitron -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet" />

  <!-- Bibliotecas on-chain -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.41.0/lib/index.iife.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@solana/spl-token@0.3.5/lib/index.iife.min.js"></script>

  <style>
    /* RESET & BASE */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; overflow: hidden; background: black; font-family: 'Orbitron', Arial, sans-serif; }
    canvas { display: block; margin: auto; max-width: 100vw; max-height: 100vh; }

    /* HUD */
    .hud {
      position: absolute;
      color: white;
      text-shadow: 2px 2px 5px #000;
      z-index: 1000;
      font: 18px 'Orbitron', sans-serif;
    }
    #scoreDisplay { top: 10px; left: 10px; }
    #coinDisplay { top: 40px; left: 10px; }
    #highScoreDisplay { top: 70px; left: 10px; }
    #contadorCDOGE { top: 100px; left: 10px; color: #0ff; }
    #contadorBCOSMO { top: 130px; left: 10px; color: #faa200; }
    #shieldDisplay { top: 160px; left: 10px; color: #faa; display: none; }
    #imanContador { top: 190px; right: 20px; background: rgba(0,0,0,0.75); padding: 8px; border-radius: 10px; font-size: 16px; display: none; }
    #nombreJugador { top: 10px; left: 50%; transform: translateX(-50%); color: #0ff; }

    /* Botones */
    .fixed {
      position: fixed;
      z-index: 10000;
      transition: opacity .3s;
    }
    .hiddenUI { opacity: 0; }
    .btn {
      padding: 1rem 2rem;
      background: #0ff;
      border: none;
      border-radius: 10px;
      color: #000;
      font-size: 1.2rem;
      font-weight: bold;
      cursor: pointer;
      transition: transform .2s, box-shadow .2s;
    }
    .btn:hover { transform: scale(1.05); box-shadow: 0 0 10px #0ff; }

    #conectarWalletBtn {
      top: 20px; right: 20px;
      background: #0ff; color: #000; border: none;
      border-radius: 12px;
      padding: 10px 20px;
      font: 16px 'Orbitron', sans-serif;
      cursor: pointer;
    }
    #menuPrincipal {
      top: 70px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* Paneles flotantes */
    #tiendaCDOGE, #rankingPanel, #reclamoPanel {
      position: fixed;
      background: rgba(0,0,0,0.85);
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0 0 15px #0ff;
      font: 14px 'Orbitron', sans-serif;
      color: #fff;
      z-index: 10001;
      display: none;
    }
    #tiendaCDOGE { bottom: 20px; left: 20px; width: 320px; border: 2px solid #0ff; }
    #rankingPanel { top: 200px; left: 50%; transform: translateX(-50%); }
    #reclamoPanel { top: 150px; left: 50%; transform: translateX(-50%); width: 300px; border: 2px solid #faa; }

    /* Pantallas superpuestas */
    #pantallaCarga, #startScreen, #gameOverScreen, #newRecordMessage, #playerNameForm {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.85);
      color: white;
      z-index: 9999;
      text-align: center;
    }
    #pantallaCarga .spinner {
      width: 60px;
      height: 60px;
      border: 6px solid #ffffff22;
      border-top: 6px solid #0ff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    #gameOverScreen, #newRecordMessage, #playerNameForm { display: none; }
    #gameOverScreen.show { display: flex; opacity: 1; transition: opacity 1s; }
    #reiniciarBtn { margin-top: 20px; display: none; }
  </style>
</head>
<body>
  <!-- Pantalla de carga -->
  <div id="pantallaCarga">
    <div class="spinner"></div>
    <p style="font-size:20px;margin-top:20px;">Cargando CosmoDoge...</p>
  </div>
  
  <!-- HUD y botones -->
  <button id="conectarWalletBtn" class="fixed">üîó Conectar Wallet</button>
  <div id="scoreDisplay" class="hud">üöÄ x 0</div>
  <div id="coinDisplay" class="hud">üí∞ x 0</div>
  <div id="highScoreDisplay" class="hud">üîù M√°x: 0</div>
  <div id="contadorCDOGE" class="hud">üí∞ CDOGE: 0</div>
  <div id="contadorBCOSMO" class="hud">üêï BCOSMO: 0</div>
  <div id="shieldDisplay" class="hud"></div>
  <div id="imanContador"></div>
  <div id="nombreJugador" class="hud"></div>
  
  <div id="menuPrincipal" class="fixed">
    <button id="btnTienda" class="btn">üõí Tienda</button>
    <button id="btnRanking" class="btn">üèÜ Ranking</button>
    <button id="btnReclamo" class="btn">üéÅ Reclamar Tokens</button>
  </div>
  
  <!-- Tienda de objetos -->
  <div id="tiendaCDOGE">
    <h3 style="color:#0ff;">üõí Tienda CosmoDoge</h3>
    <div style="margin-bottom:15px;padding:10px;background:#111;border:1px solid #0ff;border-radius:10px;">
      <p style="color:#0ff;">üß≤ Im√°n Espacial (CDOGE)</p>
      <p style="color:#bbb;">Atrae monedas 1h</p>
      <button id="comprarImanCDOGE" class="btn">Comprar 1,500 $CDOGE</button>
    </div>
    <div style="margin-bottom:15px;padding:10px;background:#111;border:1px solid #0ff;border-radius:10px;">
      <p style="color:#0ff;">üß≤ Im√°n Espacial (BCOSMO)</p>
      <p style="color:#bbb;">Atrae monedas 1h</p>
      <button id="comprarImanBCOSMO" class="btn">Comprar 2,500 $BCOSMO</button>
    </div>
    <div style="padding:10px;background:#111;border:1px solid #faa;border-radius:10px;">
      <p style="color:#faa;">üõ°Ô∏è Escudo Protector</p>
      <p style="color:#bbb;">Inmune 3 colisiones</p>
      <button id="comprarEscudo" class="btn">Comprar 1,000 ü™ô</button>
    </div>
  </div>
  
  <!-- Panel de ranking -->
  <div id="rankingPanel">
    <div id="topRanking"></div>
    <button id="closeRanking" class="btn">Cerrar</button>
  </div>
  
  <!-- Panel de Reclamo Manual -->
  <div id="reclamoPanel">
    <h3 style="color:#faa;">üéÅ Reclamar Tokens</h3>
    <p id="infoReclamo" style="margin-bottom:10px;"></p>
    <select id="tokenSeleccionado" style="width:100%;padding:10px;margin-bottom:10px;border-radius:8px;">
      <option value="">Selecciona Token</option>
      <option value="CDOGE">$CDOGE</option>
      <option value="BCOSMO">$BCOSMO</option>
    </select>
    <input type="text" id="walletJugador" placeholder="Tu direcci√≥n Wallet" style="padding:10px;border:none;border-radius:8px;margin-bottom:10px;width:100%;" />
    <button id="enviarReclamoBtn" class="btn">Enviar Reclamo</button>
    <button id="cerrarReclamo" class="btn" style="margin-top:10px;background:#faa;">Cancelar</button>
  </div>
  
  <!-- Canvas del Juego -->
  <canvas id="gameCanvas"></canvas>
  
  <!-- Pantalla de Inicio -->
  <div id="startScreen" style="display:none;">
    <h1>üöÄ CosmoDoge Flotante</h1>
    <button id="startButton" class="btn">¬°Comenzar!</button>
  </div>
  
  <!-- Pantalla de Game Over -->
  <div id="gameOverScreen">
    <h1>üö® GAME OVER üö®</h1>
    <p>Puntaje: <span id="finalScore">0</span></p>
    <button id="reiniciarBtn" class="btn">Reiniciar</button>
  </div>
  
  <!-- Pantalla Nuevo Record -->
  <div id="newRecordMessage" style="display:none;">
    <h1>üåü ¬°Nuevo r√©cord gal√°ctico!</h1>
    <p>Ingresa tu nombre para guardarlo.</p>
  </div>
  
  <!-- Formulario Nombre Jugador -->
  <div id="playerNameForm">
    <input type="text" id="playerName" placeholder="Tu nombre gal√°ctico" style="padding:10px;border:none;border-radius:8px;margin-bottom:10px;" />
    <button id="saveScoreButton" class="btn">Guardar Puntaje</button>
  </div>
<!-- Firebase Configuraci√≥n -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
  import { getFirestore, collection, query, orderBy, limit, getDocs, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";
  
  const firebaseConfig = {
    apiKey: "AIzaSyDaM9HtMtTlJXc-V4HfsZ7bbC__ZPe9zIk",
    authDomain: "cosmodogelive.firebaseapp.com",
    projectId: "cosmodogelive",
    storageBucket: "cosmodogelive.appspot.com",
    messagingSenderId: "648227069914",
    appId: "1:648227069914:web:3ef7ac8da4ab52c30deae3"
  };
  initializeApp(firebaseConfig);
  const db = getFirestore();
  
  // Guardar jugadores en Ranking
  window.guardarJugadorAutomatic = async (nombre, puntaje, monedas) => {
    await addDoc(collection(db, "jugadores"), {
      nombre: nombre,
      puntaje: puntaje,
      monedas: monedas,
      fecha: serverTimestamp()
    });
  };
  
  // Mostrar el Top 5 del Ranking
  window.mostrarTopRanking = async () => {
    const lista = document.getElementById("topRanking");
    const snap = await getDocs(query(collection(db, "jugadores"), orderBy("puntaje", "desc"), limit(5)));
    let html = "<h2>üèÜ Top 5 CosmoDoge</h2><ul style='list-style:none;padding:0;'>";
    snap.forEach((doc, i) => {
      const d = doc.data();
      html += `<li>#${i + 1} <strong>${d.nombre}</strong> ‚Äì ${d.puntaje} pts ‚Äì ${d.monedas} ü™ô</li>`;
    });
    lista.innerHTML = html + "</ul>";
  };
  </script>
  
  <!-- Google Sheets URL -->
  <script>
  const sheetsURL = 'https://script.google.com/macros/s/AKfycbzdsdEv22T0mXg5Sdo-DyEnQ_AJ8UK8yJkN9JorxlhkkaqAA3cwzXwGHgTgp7LJtzs6PQ/exec';
  const telegramBotId = '6670657388:AAHZz-V1djsVu-7EXVzM5nQQ45SrgYaKtvY';
  const telegramChatId = '-1002149679410'; // ID del grupo/canal
  
  // Funci√≥n para enviar reclamo a Google Sheets + Telegram
  async function enviarReclamoManual(nombre, wallet, token) {
    const data = {
      nombre: nombre,
      wallet: wallet,
      token: token,
      fecha: new Date().toLocaleString()
    };
    
    try {
      // Enviar a Google Sheets
      await fetch(sheetsURL, {
        method: 'POST',
        mode: 'no-cors',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
      });
  
      // Enviar notificaci√≥n a Telegram
      const mensaje = `üöÄ NUEVO RECLAMO:\nüë§ Nombre: ${nombre}\nüí∏ Token: ${token}\nüíº Wallet: ${wallet}\nüìÖ Fecha: ${data.fecha}`;
      await fetch(`https://api.telegram.org/bot${telegramBotId}/sendMessage?chat_id=${telegramChatId}&text=${encodeURIComponent(mensaje)}`);
  
      alert('‚úÖ Reclamo enviado con √©xito. El equipo lo procesar√° manualmente.');
    } catch (error) {
      console.error(error);
      alert('‚ùå Error al enviar el reclamo.');
    }
  }
  </script>
<script>
  const canvas = document.getElementById('gameCanvas'), ctx = canvas.getContext('2d');
  function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
  window.addEventListener('resize', resizeCanvas); resizeCanvas();
  
  // Estado inicial
  let score = 0, coins = parseInt(localStorage.getItem('cdogeCoins')) || 0;
  let highScore = parseInt(localStorage.getItem('cdogeFloatHighScore')) || 0;
  let totalCDOGE = parseInt(localStorage.getItem('cdogeTotalCoins')) || 0;
  let totalBCOSMO = parseInt(localStorage.getItem('bcosmoTotalCoins')) || 0;
  let gameStarted = false, isGameOver = false;
  let timeElapsed = 0, lastScoreTime = 0, lastFondoChange = 0, lastObs = Date.now();
  const gravityLevels = [0.5, 0.6, 0.8, 1.0];
  let gravity = 0.5, jumpPower = -10;
  let skinAstronautaActivo = false;
  let shieldHits = 0; // nuevo: escudo de 3 colisiones
  
  // Arrays
  let coinsArr = [], obsArr = [], cdogeArr = [], bcosmoArr = [], cofresArr = [], agujerosArr = [];
  const valorPorMoneda = 50, valorBCOSMO = 50;
  let turnoCoins = true;
  
  // Fondos
  const fondos = ['fondo-cosmodoge-v2.png', 'fondo-cosmodoge-v3.png', 'fondo-cosmodoge-v4.png'];
  let fi = 0;
  const fondoImg = new Image();
  fondoImg.src = fondos[0];
  
  // Jugador
  const doge = { x: 80, y: 200, w: 50, h: 50, v: 0, img: new Image() };
  doge.img.src = 'cosmodoge-cohete-juego.png';
  
  // Skins
  const skinAstronauta = new Image();
  skinAstronauta.src = 'cosmodoge-skin-astronauta.png';
  
  // Im√°genes
  const coinImg = new Image(); coinImg.src = 'coin-cosmodoge.png';
  const cdogeImg = new Image(); cdogeImg.src = 'moneda-cosmodoge.png';
  const bcosmoImg = new Image(); bcosmoImg.src = 'moneda-bcosmo.png';
  const obsImgs = ['obstaculo-estelar.png', 'obstaculo-explosion.png', 'obstaculo-explosion-aire.png'];
  const cofreImg = new Image(); cofreImg.src = 'cofre-espacial.png';
  const agujeroImg = new Image(); agujeroImg.src = 'agujero-negro.png';
  
  // Sonidos
  const sndJump = new Audio('jump.mp3');
  const sndCoin = new Audio('coin.mp3');
  const sndBoom = new Audio('boom.mp3');
  const sndRecord = new Audio('record.mp3');
  const sndCdoge = new Audio('sonido-moneda-cdoge.mp3');
  const sndBcosmo = new Audio('sonido-moneda-bcosmo.mp3');
  const music = new Audio('music-cosmodoge-theme.mp3');
  music.loop = true;
  music.volume = 0.3;
  
  // Utilidades
  function play(s) { s.currentTime = 0; s.play().catch(() => {}); }
  function showMsg(txt, x, y) {
    const d = document.createElement('div');
    Object.assign(d.style, {position:'absolute',left:`${x}px`,top:`${y}px`,color:'#0ff',font:'18px Orbitron',zIndex:10000,transition:'all 1.5s'});
    d.textContent = txt;
    document.body.appendChild(d);
    setTimeout(() => { d.style.opacity = 0; d.style.transform = 'translateY(-40px)'; }, 100);
    setTimeout(() => d.remove(), 1600);
  }
  
  // Contadores
  function updCDOGE() { document.getElementById('contadorCDOGE').textContent = `üí∞ CDOGE: ${totalCDOGE}`; }
  function updBCOSMO() { document.getElementById('contadorBCOSMO').textContent = `üêï BCOSMO: ${totalBCOSMO}`; }
  
  // Ajustar gravedad por dificultad
  function updDiff(sec) {
    gravity = sec >= 75 ? gravityLevels[3] :
              sec >= 45 ? gravityLevels[2] :
              sec >= 30 ? gravityLevels[1] : gravityLevels[0];
  }
// Aura visual
function drawAura(p) {
  const expIman = parseInt(localStorage.getItem('imanExpiracion')) || 0;
  const expShield = parseInt(localStorage.getItem('shieldExpiration')) || 0;
  if (Date.now() < expIman) {
    ctx.beginPath();
    ctx.arc(p.x+p.w/2, p.y+p.h/2, p.w*0.8, 0, Math.PI*2);
    ctx.strokeStyle = '#0ffff088'; ctx.lineWidth = 4;
    ctx.stroke();
  }
  if (Date.now() < expShield) {
    ctx.beginPath();
    ctx.arc(p.x+p.w/2, p.y+p.h/2, p.w*1.2, 0, Math.PI*2);
    ctx.strokeStyle = '#ff0a'; ctx.lineWidth = 5;
    ctx.setLineDash([5, 15]);
    ctx.stroke(); ctx.setLineDash([]);
  }
}

// Jugador
function drawDoge() {
  if (skinAstronautaActivo) ctx.drawImage(skinAstronauta, doge.x, doge.y, doge.w, doge.h);
  else ctx.drawImage(doge.img, doge.x, doge.y, doge.w, doge.h);
  drawAura(doge);
}

// Monedas normales
function spawnCoinGroup() {
  for (let i = 0; i < Math.floor(Math.random()*6)+5; i++) {
    coinsArr.push({x: canvas.width+i*40, y: Math.random()*(canvas.height-100), w:30, h:30, s:2});
  }
}

function drawCoins() {
  for (let i = coinsArr.length-1; i >= 0; i--) {
    const c = coinsArr[i];
    const exp = parseInt(localStorage.getItem('imanExpiracion')) || 0;
    if (Date.now() < exp) {
      const dx = c.x+15 - (doge.x+doge.w/2), dy = c.y+15 - (doge.y+doge.h/2), dist = Math.hypot(dx,dy);
      if (dist < 200) { c.x -= dx*0.05; c.y -= dy*0.05; }
    }
    c.x -= c.s;
    ctx.drawImage(coinImg, c.x, c.y, c.w, c.h);
    if (doge.x < c.x+c.w && doge.x+doge.w > c.x && doge.y < c.y+c.h && doge.y+doge.h > c.y) {
      coins++;
      localStorage.setItem('cdogeCoins', coins);
      document.getElementById('coinDisplay').textContent = `üí∞ x ${coins}`;
      play(sndCoin);
      coinsArr.splice(i,1);
    }
  }
}

// Cofres
function spawnCofre() {
  cofresArr.push({x:canvas.width, y:Math.random()*canvas.height/2+50, w:50, h:50});
}

function drawCofres() {
  for (let i = cofresArr.length-1; i >= 0; i--) {
    const cofre = cofresArr[i];
    cofre.x -= 3;
    ctx.drawImage(cofreImg, cofre.x, cofre.y, cofre.w, cofre.h);
    if (doge.x < cofre.x+cofre.w && doge.x+doge.w > cofre.x && doge.y < cofre.y+cofre.h && doge.y+doge.h > cofre.y) {
      coins += 200;
      localStorage.setItem('cdogeCoins', coins);
      document.getElementById('coinDisplay').textContent = `üí∞ x ${coins}`;
      showMsg('+200 ü™ô Cofre!', cofre.x, cofre.y);
      cofresArr.splice(i,1);
    }
  }
}

// Agujeros Negros
function spawnAgujero() {
  agujerosArr.push({x:canvas.width, y:Math.random()*canvas.height/2+100, w:80, h:80});
}

function drawAgujeros() {
  for (let i = agujerosArr.length-1; i >= 0; i--) {
    const ag = agujerosArr[i];
    ag.x -= 3;
    ctx.drawImage(agujeroImg, ag.x, ag.y, ag.w, ag.h);

    // Atracci√≥n gravitacional
    const dx = ag.x + ag.w/2 - (doge.x + doge.w/2);
    const dy = ag.y + ag.h/2 - (doge.y + doge.h/2);
    const dist = Math.hypot(dx, dy);

    if (dist < 300) {
      doge.x += dx * 0.002;
      doge.y += dy * 0.002;
    }
    if (dist < 40) {
      if (!handleCollision()) gameOver();
    }
  }
}

// Obst√°culos normales
function spawnObstacle() {
  const img = new Image();
  img.src = obsImgs[Math.floor(Math.random()*obsImgs.length)];
  obsArr.push({x:canvas.width, y:Math.random()*(canvas.height-50), w:50, h:50, sX:2+Math.random()*2, sY:0.5+Math.random()*1.5, img});
}

function drawObstacles() {
  obsArr.forEach((o,i) => {
    o.x -= o.sX;
    o.y += (o.y < doge.y ? o.sY : -o.sY);
    ctx.drawImage(o.img, o.x, o.y, o.w, o.h);
    if (doge.x < o.x+o.w && doge.x+doge.w > o.x && doge.y < o.y+o.h && doge.y+doge.h > o.y) {
      if (!handleCollision()) gameOver();
    }
  });
  obsArr = obsArr.filter(o => o.x+o.w > 0);
}

// Main Loop
function loop(ts) {
  if (!gameStarted || isGameOver) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawBackground();
  doge.v += gravity; doge.y += doge.v;
  if (doge.y+doge.h >= canvas.height || doge.y <= 0) {
    if (!handleCollision()) return gameOver();
    doge.y = canvas.height/2;
  }
  drawDoge();
  drawCoins();
  drawObstacles();
  drawCofres();
  drawAgujeros();

  requestAnimationFrame(loop);
}

// Fin juego
function gameOver() {
  isGameOver = true;
  music.pause();
  music.currentTime = 0;
  document.getElementById('finalScore').textContent = score;
  document.getElementById('gameOverScreen').style.display = 'flex';
  setTimeout(() => document.getElementById('reiniciarBtn').style.display = 'block', 1500);
  validarReclamos(); // activamos formulario
}
</script>
<!-- Formulario para Reclamos -->
<div id="reclamoForm" style="display:none;flex-direction:column;align-items:center;justify-content:center;background:rgba(0,0,0,0.9);color:#0ff;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:10000;">
  <h2>üöÄ Reclamar tus tokens</h2>
  <p>Confirma tus datos para enviar solicitud de retiro:</p>
  <input type="text" id="walletAddress" placeholder="Tu wallet (MetaMask o Phantom)" style="margin:10px;padding:10px;border-radius:8px;border:none;" />
  <select id="tokenSeleccionado" style="margin:10px;padding:10px;border-radius:8px;border:none;">
    <option value="">Selecciona token...</option>
    <option value="CDOGE">üöÄ CDOGE</option>
    <option value="BCOSMO">üêï BCOSMO</option>
  </select>
  <button id="enviarReclamoBtn" class="btn" style="margin-top:20px;">üì® Enviar Reclamo</button>
  <button id="cancelarReclamoBtn" class="btn" style="margin-top:10px;background:#faa;">‚ùå Cancelar</button>
</div>

<script>
// Configuraci√≥n Google Sheets
const SHEET_URL = 'https://script.google.com/macros/s/AKfycbzdsdEv22T0mXg5Sdo-DyEnQ_AJ8UK8yJkN9JorxlhkkaqAA3cwzXwGHgTgp7LJtzs6PQ/exec';

// Validar si se puede reclamar
function validarReclamos() {
  const totalCdoge = parseInt(localStorage.getItem('cdogeTotalCoins')) || 0;
  const totalBcosmo = parseInt(localStorage.getItem('bcosmoTotalCoins')) || 0;
  const form = document.getElementById('reclamoForm');
  const tokenSel = document.getElementById('tokenSeleccionado');
  tokenSel.innerHTML = '<option value="">Selecciona token...</option>';

  if (totalCdoge >= 50000) tokenSel.innerHTML += '<option value="CDOGE">üöÄ Reclamar CDOGE</option>';
  if (totalBcosmo >= 50000) tokenSel.innerHTML += '<option value="BCOSMO">üêï Reclamar BCOSMO</option>';

  if (tokenSel.options.length > 1) {
    form.style.display = 'flex';
  }
}

// Evento para enviar reclamo
document.getElementById('enviarReclamoBtn').addEventListener('click', () => {
  const wallet = document.getElementById('walletAddress').value.trim();
  const token = document.getElementById('tokenSeleccionado').value;
  if (!wallet || !token) return alert('Completa todos los campos.');
  
  const totalCdoge = parseInt(localStorage.getItem('cdogeTotalCoins')) || 0;
  const totalBcosmo = parseInt(localStorage.getItem('bcosmoTotalCoins')) || 0;
  let cantidad = 0;

  if (token === 'CDOGE' && totalCdoge >= 50000) cantidad = 5000;
  if (token === 'BCOSMO' && totalBcosmo >= 50000) cantidad = 5000;
  if (cantidad === 0) return alert('No cumples requisitos para reclamar.');

  const payload = {
    wallet: wallet,
    token: token,
    cantidad: cantidad,
    fecha: new Date().toLocaleString()
  };

  fetch(SHEET_URL, {
    method: 'POST',
    mode: 'no-cors',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  });

  // Descontar saldo despu√©s del reclamo
  if (token === 'CDOGE') {
    const nuevo = totalCdoge - 50000;
    localStorage.setItem('cdogeTotalCoins', nuevo);
    updCDOGE();
  } else if (token === 'BCOSMO') {
    const nuevo = totalBcosmo - 50000;
    localStorage.setItem('bcosmoTotalCoins', nuevo);
    updBCOSMO();
  }

  alert('‚úÖ Reclamo enviado correctamente.\nSer√° procesado manualmente.');
  document.getElementById('reclamoForm').style.display = 'none';
});

// Cancelar formulario
document.getElementById('cancelarReclamoBtn').addEventListener('click', () => {
  document.getElementById('reclamoForm').style.display = 'none';
});
<!-- Bot√≥n para Reclamar Tokens -->
<div style="position:fixed;bottom:20px;right:20px;z-index:10000;">
  <button onclick="validarReclamos()" class="btn" style="background:#0ff;color:#000;">üéÅ Reclamar Tokens</button>
</div>

</script>
 
</body>
</html>
